@{
    ViewData["Title"] = "Home Page";
    var employee = ViewBag.Employee as OKRPerformanceManagement.Models.Employee;
    var userRole = ViewBag.UserRole as string;
}

<div class="text-center">
    <h1 class="display-4">Welcome to OKR Performance Management</h1>
    <p class="lead">Track and manage employee performance with Objectives and Key Results (OKRs)</p>
    
    @if (employee != null)
    {
        <div class="alert alert-info mt-3">
            <h4>Welcome, @employee.FirstName @employee.LastName!</h4>
            <p><strong>Role:</strong> @employee.Role | <strong>Position:</strong> @employee.Position</p>
            <p><strong>Line of Business:</strong> @employee.LineOfBusiness | <strong>Financial Year:</strong> @employee.FinancialYear</p>
        </div>
    }
</div>

@if (userRole == "Admin")
{
    <div class="row mt-5">
        <div class="col-md-3">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">Total Employees</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.EmployeeCount</h4>
                    <p class="card-text">All employees in the system</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success mb-3">
                <div class="card-header">Active Reviews</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.ActiveReviews</h4>
                    <p class="card-text">Reviews in progress</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-info mb-3">
                <div class="card-header">Managers</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.ManagerCount</h4>
                    <p class="card-text">Total managers</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-warning mb-3">
                <div class="card-header">Completed Reviews</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.CompletedReviews</h4>
                    <p class="card-text">Reviews completed</p>
                </div>
            </div>
        </div>
    </div>
}
else if (userRole == "Manager")
{
    <div class="row mt-5">
        <div class="col-md-3">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">My Team Members</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.EmployeeCount</h4>
                    <p class="card-text">Team members under my management</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-warning mb-3">
                <div class="card-header">Pending Reviews</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.PendingReviews</h4>
                    <p class="card-text">Reviews awaiting my action</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success mb-3">
                <div class="card-header">Completed Reviews</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.CompletedReviews</h4>
                    <p class="card-text">Reviews completed this period</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-info mb-3">
                <div class="card-header">Team Objectives</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.ObjectiveCount</h4>
                    <p class="card-text">Objectives set for my team</p>
                </div>
            </div>
        </div>
    </div>
    
}
else
{
    <div class="row mt-5">
        <div class="col-md-3">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">My Reviews</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.ReviewCount</h4>
                    <p class="card-text">My performance reviews</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-info mb-3">
                <div class="card-header">My Objectives</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.ObjectiveCount</h4>
                    <p class="card-text">Objectives assigned to me</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-warning mb-3">
                <div class="card-header">My Key Results</div>
                <div class="card-body">
                    <h4 class="card-title">@ViewBag.KeyResultCount</h4>
                    <p class="card-text">Key results to achieve</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success mb-3">
                <div class="card-header">Active Reviews</div>
                <div class="card-body">
                    <h4 class="card-title">@(ViewBag.MyActiveReviews?.Count ?? 0)</h4>
                    <p class="card-text">Reviews in progress</p>
                </div>
            </div>
        </div>
    </div>
}

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    @if (userRole == "Manager")
                    {
                        <div class="col-md-3">
                            <a href="@Url.Action("Index", "Manager")" class="btn btn-primary btn-lg btn-block mb-2">Manager Dashboard</a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("CreateTemplateReview", "Manager")" class="btn btn-success btn-lg btn-block mb-2">Create Template Review</a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("PendingReviews", "Manager")" class="btn btn-info btn-lg btn-block mb-2">Pending Reviews</a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("CreateEmployee", "Manager")" class="btn btn-warning btn-lg btn-block mb-2">Create Employee</a>
                        </div>
                    }
                    else if (userRole == "Admin")
                    {
                        <div class="col-md-3">
                            <a href="@Url.Action("Index", "Admin")" class="btn btn-primary btn-lg btn-block mb-2">Admin Dashboard</a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("CreateEmployee", "Admin")" class="btn btn-success btn-lg btn-block mb-2">Create Employee</a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("Index", "Admin")" class="btn btn-info btn-lg btn-block mb-2">Manage Roles</a>
                        </div>
                        <div class="col-md-3">
                            <a href="@Url.Action("Index", "Admin")" class="btn btn-warning btn-lg btn-block mb-2">My Reviews</a>
                        </div>
                    }
                    else
                    {
                        <div class="col-md-6">
                            <a href="@Url.Action("MyPerformanceHistory", "Employee")" class="btn btn-primary btn-lg btn-block mb-2">My Performance Reviews</a>
                        </div>
                        <div class="col-md-6">
                            <a href="@Url.Action("MyOKRs", "Employee")" class="btn btn-info btn-lg btn-block mb-2">View Current OKRs</a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .avatar-sm {
        width: 40px;
        height: 40px;
        font-size: 14px;
        font-weight: bold;
    }
    
    .border-left-primary {
        border-left: 4px solid #007bff !important;
    }
    
    .border-left-success {
        border-left: 4px solid #28a745 !important;
    }
    
    .border-left-warning {
        border-left: 4px solid #ffc107 !important;
    }
    
    .border-left-info {
        border-left: 4px solid #17a2b8 !important;
    }
</style>

